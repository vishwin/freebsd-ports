PORTNAME=	khronos-texture
DISTVERSION=	4.3.2
CATEGORIES=	graphics
DISTVERSIONPREFIX=	v

MAINTAINER=	vvd@FreeBSD.org
COMMENT=	Khronos Texture is a container for textures for OpenGL/Vulkan/etc
WWW=		https://github.com/KhronosGroup/KTX-Software

LICENSE=	APACHE20

BUILD_DEPENDS=	bash:shells/bash

USES=		cmake compiler:c++11-lib python:build

USE_GITHUB=	yes
GH_ACCOUNT=	KhronosGroup
GH_PROJECT=	KTX-Software

OPTIONS_SINGLE=			SIMD
OPTIONS_SINGLE_SIMD=		AVX2 NEON NONE SSE2 SSE41
OPTIONS_EXCLUDE=		${${ARCH} != amd64 && ${ARCH} != i386:?AVX2 SSE2 SSE41:}
OPTIONS_EXCLUDE+=		${${ARCH} != armv6 && ${ARCH} != armv7 && ${ARCH} != aarch64:?NEON:}
OPTIONS_DEFAULT_aarch64=	NEON
OPTIONS_DEFAULT_amd64=		SSE2
OPTIONS_DEFAULT_armv7=		NEON
OPTIONS_DEFAULT_OTHER_ARCHS=	NONE
OPTIONS_DEFAULT_armv6=		${OPTIONS_DEFAULT_OTHER_ARCHS}
OPTIONS_DEFAULT_i386=		${OPTIONS_DEFAULT_OTHER_ARCHS}
OPTIONS_DEFAULT_mips=		${OPTIONS_DEFAULT_OTHER_ARCHS}
OPTIONS_DEFAULT_mipsel=		${OPTIONS_DEFAULT_OTHER_ARCHS}
OPTIONS_DEFAULT_mipselhf=	${OPTIONS_DEFAULT_OTHER_ARCHS}
OPTIONS_DEFAULT_mipshf=		${OPTIONS_DEFAULT_OTHER_ARCHS}
OPTIONS_DEFAULT_mipsn32=	${OPTIONS_DEFAULT_OTHER_ARCHS}
OPTIONS_DEFAULT_mips64=		${OPTIONS_DEFAULT_OTHER_ARCHS}
OPTIONS_DEFAULT_mips64el=	${OPTIONS_DEFAULT_OTHER_ARCHS}
OPTIONS_DEFAULT_mips64elhf=	${OPTIONS_DEFAULT_OTHER_ARCHS}
OPTIONS_DEFAULT_mips64hf=	${OPTIONS_DEFAULT_OTHER_ARCHS}
OPTIONS_DEFAULT_powerpc=	${OPTIONS_DEFAULT_OTHER_ARCHS}
OPTIONS_DEFAULT_powerpc64=	${OPTIONS_DEFAULT_OTHER_ARCHS}
OPTIONS_DEFAULT_powerpc64le=	${OPTIONS_DEFAULT_OTHER_ARCHS}
OPTIONS_DEFAULT_powerpcspe=	${OPTIONS_DEFAULT_OTHER_ARCHS}
OPTIONS_DEFAULT_riscv64=	${OPTIONS_DEFAULT_OTHER_ARCHS}
OPTIONS_DEFAULT_riscv64sf=	${OPTIONS_DEFAULT_OTHER_ARCHS}

AVX2_DESC=		Use the AVX2 instruction set
AVX2_CMAKE_ON=		-DASTCENC_ISA_AVX2:BOOL=ON -DBASISU_SUPPORT_SSE:BOOL=ON

NEON_DESC=		Use the NEON instruction set
NEON_CMAKE_ON=		-DASTCENC_ISA_NEON:BOOL=ON

NONE_DESC=		Don't use any SIMD instructions
NONE_CMAKE_ON=		-DASTCENC_ISA_NONE:BOOL=ON -DBASISU_SUPPORT_SSE:BOOL=OFF

SSE2_DESC=		Use the SSE2 instruction set
SSE2_CMAKE_ON=		-DASTCENC_ISA_SSE2:BOOL=ON -DBASISU_SUPPORT_SSE:BOOL=OFF

SSE41_DESC=		Use the SSE4.1 instruction set
SSE41_CMAKE_ON=		-DASTCENC_ISA_SSE41:BOOL=ON -DBASISU_SUPPORT_SSE:BOOL=ON

.include <bsd.port.mk>
